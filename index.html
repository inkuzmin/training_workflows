<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Vendor styles -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cytoscape-panzoom/2.5.2/cytoscape.js-panzoom.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-simplecolorpicker@0.3.1/jquery.simplecolorpicker.css">
        <!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css">-->

        <!-- Custom styles -->
        <link rel="stylesheet" href="css/main.css">
    </head>
    <body>
    <div class="workflow-diagram-wrapper">
        <div class="workflow-toolbar-wrapper">
            <div id="workflow-toolbar">
              <span id="workflow-save-warning" style="display: none">
                <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                You have unsaved changes
              </span>
                <span id="workflow-status-message"></span>
                <a class="btn btn-default disabled" id="workflow-toolbar-undo">
                    <i class="fa fa-undo"></i> <span>Undo</span>
                </a>
                <a class="btn btn-default disabled" id="workflow-toolbar-redo">
                    <i class="fa fa-repeat"></i> <span>Redo</span>
                </a>
                <a class="btn btn-default" id="workflow-toolbar-add">
                    <i class="fa fa-plus"></i> Add node
                </a>
                <a class="btn btn-default" id="workflow-toolbar-save">
                    <i class="fa fa-save"></i> Save
                </a>
            </div>
            <div id="workflow-status-bar">
                <div class="pull-right">
                    <a class="btn btn-default node-context-button node-context-navigation-button edge-context-button" id="workflow-toolbar-back" style="display: none">
                        <i class="fa fa-angle-left"></i> Back
                    </a>
                    <a class="btn btn-default node-context-button node-context-navigation-button edge-context-button" id="workflow-toolbar-forward" style="display: none">
                        Forward <i class="fa fa-angle-right"></i>
                    </a>
                    <a class="btn btn-default node-context-button node-context-operation-button edge-context-button" id="workflow-toolbar-edit" style="display: none">
                        <i class="fa fa-edit"></i> Edit
                    </a>
                    <a class="btn btn-default node-context-button node-context-operation-button" id="workflow-toolbar-link" style="display: none">
                        <i class="fa fa-link"></i> Link
                    </a>
                    <a class="btn btn-default node-context-button node-context-operation-button" id="workflow-toolbar-add-child" style="display: none">
                        <i class="fa fa-plus-square"></i> Add child
                    </a>
                    <a class="btn btn-default node-context-button edge-context-button node-context-operation-button" id="workflow-toolbar-delete" style="display: none">
                        <i class="fa fa-trash"></i> Delete
                    </a>
                    <a class="btn btn-default" id="workflow-toolbar-cancel" style="display: none">
                        <i class="fa fa-ban"></i> <span>Cancel</span>
                    </a>
                </div>
                <div id="workflow-status-selected-node"></div>
            </div>
        </div>
        <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="node-modal-title" id="node-modal">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="node-modal-title">New node</h4>
                    </div>

                    <div class="modal-body">
                        <div class="form-group">
                            <label for="node-modal-form-title">Title</label>
                            <input type="text" class="form-control" id="node-modal-form-title" placeholder="Title">
                        </div>

                        <div class="form-group">
                            <label for="node-modal-form-description">Description</label>
                            <textarea class="form-control" id="node-modal-form-description" rows="5"></textarea>
                        </div>

                        <div class="form-group">
                            <label>Associations</label>
                            <div id="node-modal-associated-resource-list">
                                <!--<%# This is populated via javascript. See workflows.js and templates/associated_resource_form.hbs %>-->
                            </div>
                            <button data-resource-type="materials" class="btn btn-default node-modal-add-resource-btn"><i class="fa fa-book"></i> Add training material</button>
                            <button data-resource-type="events" class="btn btn-default node-modal-add-resource-btn"><i class="fa fa-calendar"></i> Add event</button>
                            <button data-resource-type="tools" class="btn btn-default node-modal-add-resource-btn"><i class="fa fa-wrench"></i> Add tool</button>
                            <button data-resource-type="policies" class="btn btn-default node-modal-add-resource-btn"><i class="fa fa-file-text-o"></i> Add policy</button>
                        </div>

                        <div class="form-group">
                            <label>Terms</label>
                            <ul id="node-modal-ontology-terms-list">
                                <%# This is populated via javascript. See workflows.js and templates/associated_resource_form.hbs %>
                            </ul>
                            <input id="term-autocomplete" data-attribute="title" type="text" class="form-control" autocomplete="off" placeholder="Type to search for a term..."/>
                        </div>

                        <div class="form-group">
                            <label for="node-modal-form-colour">Colour</label>
                            <p style="margin: 0px; padding: 5px;">
                                Click inside the box below to select colour using colour picker:
                            </p>
                            <input type="text" class="form-control jscolor {hash:true, zIndex: 100000}" value="#F0721E" id="node-modal-form-colour">
                            <p style="background-color: #E7E7E7; margin-top: 5px; padding: 5px;">
                                Or select from pre-defined colours:
                                <select id="simple-colour-picker">
                                    <option value="#FFC0CB"></option>
                                    <option value="#FFB6C1"></option>
                                    <option value="#FF69B4"></option>
                                    <option value="#FF1493"></option>
                                    <option value="#DB7093"></option>
                                    <option value="#C71585"></option>
                                    <option value="#FFA07A"></option>
                                    <option value="#FA8072"></option>
                                    <option value="#E9967A"></option>
                                    <option value="#F08080"></option>
                                    <option value="#CD5C5C"></option>
                                    <option value="#DC143C"></option>
                                    <option value="#B22222"></option>
                                    <option value="#8B0000"></option>
                                    <option value="#FF0000"></option>
                                    <option value="#FF4500"></option>
                                    <option value="#FF6347"></option>
                                    <option value="#FF7F50"></option>
                                    <option value="#FF8C00"></option>
                                    <option value="#FFA500"></option>
                                    <option value="#FFFF00"></option>
                                    <option value="#FFFFE0"></option>
                                    <option value="#FFFACD"></option>
                                    <option value="#FAFAD2"></option>
                                    <option value="#FFEFD5"></option>
                                    <option value="#FFE4B5"></option>
                                    <option value="#FFDAB9"></option>
                                    <option value="#EEE8AA"></option>
                                    <option value="#F0E68C"></option>
                                    <option value="#BDB76B"></option>
                                    <option value="#FFD700"></option>
                                    <option value="#FFF8DC"></option>
                                    <option value="#FFEBCD"></option>
                                    <option value="#FFE4C4"></option>
                                    <option value="#FFDEAD"></option>
                                    <option value="#F5DEB3"></option>
                                    <option value="#DEB887"></option>
                                    <option value="#D2B48C"></option>
                                    <option value="#BC8F8F"></option>
                                    <option value="#F4A460"></option>
                                    <option value="#DAA520"></option>
                                    <option value="#B8860B"></option>
                                    <option value="#CD853F"></option>
                                    <option value="#D2691E"></option>
                                    <option value="#8B4513"></option>
                                    <option value="#A0522D"></option>
                                    <option value="#A52A2A"></option>
                                    <option value="#800000"></option>
                                    <option value="#556B2F"></option>
                                    <option value="#808000"></option>
                                    <option value="#6B8E23"></option>
                                    <option value="#9ACD32"></option>
                                    <option value="#32CD32"></option>
                                    <option value="#00FF00"></option>
                                    <option value="#7CFC00"></option>
                                    <option value="#7FFF00"></option>
                                    <option value="#ADFF2F"></option>
                                    <option value="#00FF7F"></option>
                                    <option value="#00FA9A"></option>
                                    <option value="#90EE90"></option>
                                    <option value="#98FB98"></option>
                                    <option value="#8FBC8F"></option>
                                    <option value="#66CDAA"></option>
                                    <option value="#3CB371"></option>
                                    <option value="#2E8B57"></option>
                                    <option value="#228B22"></option>
                                    <option value="#008000"></option>
                                    <option value="#006400"></option>
                                    <option value="#00FFFF"></option>
                                    <option value="#00FFFF"></option>
                                    <option value="#E0FFFF"></option>
                                    <option value="#AFEEEE"></option>
                                    <option value="#7FFFD4"></option>
                                    <option value="#40E0D0"></option>
                                    <option value="#48D1CC"></option>
                                    <option value="#00CED1"></option>
                                    <option value="#20B2AA"></option>
                                    <option value="#5F9EA0"></option>
                                    <option value="#008B8B"></option>
                                    <option value="#008080"></option>
                                    <option value="#B0C4DE"></option>
                                    <option value="#B0E0E6"></option>
                                    <option value="#ADD8E6"></option>
                                    <option value="#87CEEB"></option>
                                    <option value="#87CEFA"></option>
                                    <option value="#00BFFF"></option>
                                    <option value="#1E90FF"></option>
                                    <option value="#6495ED"></option>
                                    <option value="#4682B4"></option>
                                    <option value="#4169E1"></option>
                                    <option value="#0000FF"></option>
                                    <option value="#0000CD"></option>
                                    <option value="#00008B"></option>
                                    <option value="#000080"></option>
                                    <option value="#191970"></option>
                                    <option value="#E6E6FA"></option>
                                    <option value="#D8BFD8"></option>
                                    <option value="#DDA0DD"></option>
                                    <option value="#EE82EE"></option>
                                    <option value="#DA70D6"></option>
                                    <option value="#FF00FF"></option>
                                    <option value="#FF00FF"></option>
                                    <option value="#BA55D3"></option>
                                    <option value="#9370DB"></option>
                                    <option value="#8A2BE2"></option>
                                    <option value="#9400D3"></option>
                                    <option value="#9932CC"></option>
                                    <option value="#8B008B"></option>
                                    <option value="#800080"></option>
                                    <option value="#4B0082"></option>
                                    <option value="#483D8B"></option>
                                    <option value="#6A5ACD"></option>
                                    <option value="#7B68EE"></option>
                                    <option value="#FFFFFF"></option>
                                    <option value="#FFFAFA"></option>
                                    <option value="#F0FFF0"></option>
                                    <option value="#F5FFFA"></option>
                                    <option value="#F0FFFF"></option>
                                    <option value="#F0F8FF"></option>
                                    <option value="#F8F8FF"></option>
                                    <option value="#F5F5F5"></option>
                                    <option value="#FFF5EE"></option>
                                    <option value="#F5F5DC"></option>
                                    <option value="#FDF5E6"></option>
                                    <option value="#FFFAF0"></option>
                                    <option value="#FFFFF0"></option>
                                    <option value="#FAEBD7"></option>
                                    <option value="#FAF0E6"></option>
                                    <option value="#FFF0F5"></option>
                                    <option value="#FFE4E1"></option>
                                    <option value="#DCDCDC"></option>
                                    <option value="#D3D3D3"></option>
                                    <option value="#C0C0C0"></option>
                                    <option value="#A9A9A9"></option>
                                    <option value="#808080"></option>
                                    <option value="#696969"></option>
                                    <option value="#778899"></option>
                                    <option value="#708090"></option>
                                    <option value="#2F4F4F"></option>
                                </select>
                            </p>
                        </div>

                        <input type="hidden" id="node-modal-form-id">
                        <input type="hidden" id="node-modal-form-parent-id">
                        <input type="hidden" id="node-modal-form-x">
                        <input type="hidden" id="node-modal-form-y">
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal" id="node-modal-form-close">Close</button>
                        <button type="button" class="btn btn-primary" id="node-modal-form-confirm">Done</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="workflow-diagram-container">
            <div id="workflow-diagram-content">
                <div id="cy" data-editable="true" data-workflow-type="EducationalResource" data-hide-child-nodes="false">
                </div>
                <script id="workflow-content-json" type="application/json" data-tess-id="123">
                  null
                </script>
            </div>
            <div id="workflow-diagram-sidebar">
                <h3 class="nav-heading" id="workflow-diagram-sidebar-title"></h3>
                <div id="workflow-diagram-sidebar-desc"></div>
                <div class="modal-footer">
                    <!--<button id="workflow-diagram-sidebar-previous" type="button" class="btn btn-default">❮ Previous❯</button>-->
                    <!--<button id="workflow-diagram-sidebar-clear" type="button" class="btn btn-default">Clear</button>-->
                    <!--<button id="workflow-diagram-sidebar-save" type="button" class="btn btn-default">Save</button>-->
                    <button id="workflow-diagram-sidebar-repeat" type="button" class="btn btn-default">Repeat after</button>
                    <button id="workflow-diagram-sidebar-next" type="button" class="btn btn-primary">Insert after</button>
                </div>
            </div>
        </div>
    </div>

    <!-- HandlebarTemplates -->

    <script id="workflows/edam-input" type="text/x-handlebars-template">
        <div class="form-group edam">
            <input type="text" class="form-control" autocomplete="off" placeholder="Type to search for a term..." />
            <div class="spinner"></div>
            <ul class="terms">
            </ul>
        </div>
    </script>

    <script id="workflows/associated_resource_form" type="text/x-handlebars-template">
        <div class="form-inline associated-resource">
            <span class="icon"><i class="fa {{icon}}"></i></span>
            <div class="form-group">
                <label>Title</label>
                <input data-attribute="title" type="text" class="form-control" placeholder="Title" value="{{title}}">
            </div>
            <div class="form-group">
                <label>URL</label>
                <input data-attribute="url" type="text" class="form-control" placeholder="http://www.example.com/..." value="{{url}}">
            </div>
            <input data-attribute="type" type="hidden" value="{{type}}">
            <a href="#" title="Click to delete" class="delete-associated-resource">&times;</a>
        </div>
    </script>

    <script id="workflows/ontology_term_form" type="text/x-handlebars-template">
        <li class="ontology-term" data-attribute-label="{{ label }}" data-attribute-url="{{ uri }}">
            {{ label }} <span class="muted">{{ uri }}</span>
            <a href="#" class="delete-list-item">&times;</a>
        </li>
    </script>
    <script id="workflows/sidebar_content" type="text/x-handlebars-template">
        {{#if html_description}}
        {{{html_description}}}
        {{else}}
        <p class="muted">No description provided</p>
        {{/if}}

        {{#if associatedResources}}
        {{#if_any associatedResources "type" "materials"}}
        <h4 class="nav-heading-darker">Training materials</h4>
        {{#each_when associatedResources "type" "materials"}}
        <div class="resourceCard">
            <a href="{{this.url}}" target="_blank" class="h4">{{this.title}}</a>
        </div>
        {{/each_when}}
        {{/if_any}}

        {{#if_any associatedResources "type" "events"}}
        <h4 class="nav-heading-darker">Training events</h4>
        {{#each_when associatedResources "type" "events"}}
        <div class="resourceCard">
            <a href="{{this.url}}" target="_blank" class="h4">{{this.title}}</a>
        </div>
        {{/each_when}}
        {{/if_any}}

        {{#if_any associatedResources "type" "tools"}}
        <h4 class="nav-heading-darker">Tools</h4>
        {{#each_when associatedResources "type" "tools"}}
        <div class="resourceCard">
            <a href="{{this.url}}" target="_blank" class="h4">{{this.title}}</a>
            <i><span id=tool-description-{{this.id}}></span></i>
            <div id=tool-topics-{{this.id}}></div>
        </div>
        {{/each_when}}
        {{/if_any}}

        {{#if_any associatedResources "type" "policies"}}
        <h4 class="nav-heading-darker">Policies</h4>
        {{#each_when associatedResources "type" "policies"}}
        <div class="resourceCard">
            <a href="{{this.url}}" target="_blank" class="h4">{{this.title}}</a>
        </div>
        {{/each_when}}
        {{/if_any}}
        {{/if}}

        {{#if ontologyTerms}}
        <h4 class="nav-heading-darker">Terms</h4>
        <ul>
            {{#each ontologyTerms}}
            <li>{{this.label}}</li>
            {{/each}}
        </ul>
        {{/if}}
    </script>

    <script id="workflows/editor_content" type="text/x-handlebars-template">

    </script>


    <script id="workflows/fields/MultipleChoice" type="text/x-handlebars-template">
        <div class="field multiple-choice" data-field-type="text" id="{{ id }}">

            {{#each data.choices as |choice key|}}
            <div class="form-group">

                <label>{{ ../name }}
                    {{#if ../required}}
                    <span class="muted">(required)</span>
                    {{/if}}
                </label>

                {{#if ../info}}
                <i class="form-info glyphicon glyphicon-info-sign"></i>
                <div class="bg-info" style="display:none;">
                    <p class="text-info">
                        {{ ../info }}
                    </p>
                </div>
                {{/if}}

                <input type="text" class="form-control question" value="{{choice.question}}">

                <label>Answers</label>
                <ul class="sort-answers">
                {{#each choice.answers}}
                    {{> answer}}
                {{/each}}
                </ul>


                <button class="btn btn-default add-answer">
                    Add new answer
                </button>

                <!--<hr>-->

            </div>

            {{/each}}

            {{#if multiple}}
                <!--<button class="btn btn-default add-question">-->
                    <!--Add new question-->
                <!--</button>-->
                <!--<button class="btn btn-default remove-question">-->
                    <!--Remove-->
                <!--</button>-->
            {{/if}}



        </div>
    </script>

    <script id="workflows/fields/MultipleChoiceAnswer" type="text/x-handlebars-template">
        <li class="answer">
            <label class="muted"><input class="correct" type="checkbox" {{#if this.correct}}checked="checked"{{/if}} /> mark as correct</label>
            <div>
                <span class="grip glyphicon glyphicon-option-vertical"></span>
                <input type="text" class="form-control" value="{{this.answer}}">
                <span class="remove glyphicon glyphicon-remove"></span>
            </div>
        </li>
    </script>

    <script id="workflows/fields/Text" type="text/x-handlebars-template">
        <div class="field text" data-field-type="text" id="{{ id }}">
            <label for="node-modal-form-title">{{ name }}
                {{#if required}}
                <span class="muted">(required)</span>
                {{/if}}

            </label>

            {{#if info}}
            <i class="form-info glyphicon glyphicon-info-sign"></i>
            <div class="bg-info" style="display:none;">
                <p class="text-info">
                    {{ info }}
                </p>
            </div>
            {{/if}}

            <ul class="sort-inputs">
            {{#each data.inputs}}
                {{> input}}
            {{/each}}
            </ul>

            {{#if multiple}}
            <button class="btn btn-default add-input">
                Add
            </button>
            {{/if}}
        </div>

    </script>
    <script id="workflows/fields/TextInput" type="text/x-handlebars-template">
        <li class="input">
            <span class="grip glyphicon glyphicon-option-vertical"></span>
            <input type="text" class="form-control" value="{{this}}">
            <span class="remove glyphicon glyphicon-remove"></span>
        </li>
    </script>


    <script id="workflows/fields/text1" type="text/x-handlebars-template">
        <div class="form-group" data-field-type="text" id="{{ id }}">
            <label for="node-modal-form-title">{{ name }}
                {{#if required}}
                <span class="muted">(required)</span>
                {{/if}}

            </label>

            {{#if info}}
            <i class="form-info glyphicon glyphicon-info-sign"></i>
            <div class="bg-info" style="display:none;">
            <p class="text-info">
                {{ info }}
            </p>
            </div>
            {{/if}}

            <ul class="sort-inputs">
            {{#each forms}}
            <input type="text" class="form-control" placeholder="{{ name }}" value="{{this}}">
            <i class="grip glyphicon glyphicon-option-vertical"></i>
            {{/each}}
            </ul>


            {{#if multiple}}
            <button class="btn btn-default form-repeat">
                Add
            </button>
            <button class="btn btn-default form-remove">
                Remove
            </button>
            {{/if}}
        </div>
    </script>

    <script id="workflows/fields/multichoice" type="text/x-handlebars-template">
        <div class="form-group" data-field-type="text" id="{{ id }}">
            <label for="node-modal-form-title">{{ name }}
                {{#if required}}
                <span class="muted">(required)</span>
                {{/if}}

            </label>


            {{#each forms}}
            {{#if @first}}
            <input type="text" class="form-control" placeholder="{{ name }}" value="{{this}}">
            <label for="node-modal-form-title">Answers:</label>
            <input style="display:none;">
            {{/if}}
            {{/each}}

            {{#each forms}}
            {{#unless @first}}
            <!--<input type="text" class="form-control" placeholder="{{ name }}" value="{{this}}">-->
            <div class="field">
                <label class="muted"><input class="check" type="checkbox" /> mark as correct</label>
                <input type="text" class="form-control" placeholder="{{ name }}" value="{{this}}">
            </div>
            {{/unless}}
            {{/each}}


            {{#if multiple}}
            <button class="btn btn-default form-repeat">
                Add
            </button>
            <button class="btn btn-default form-remove">
                Remove
            </button>
            {{/if}}
        </div>
    </script>


    <script id="workflows/fields/edam_operation" type="text/x-handlebars-template">

    </script>

    <script id="workflows/fields/edam_input" type="text/x-handlebars-template">

    </script>

    <script id="workflows/fields/edam_output" type="text/x-handlebars-template">

    </script>

    <script id="workflows/fields/edam_format" type="text/x-handlebars-template">

    </script>

    <script id="workflows/fields/boolean" type="text/x-handlebars-template">

    </script>




    <!-- Vendor scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/markdown-it/8.4.1/markdown-it.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.2.9/cytoscape.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape-panzoom/2.5.2/cytoscape-panzoom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/split.js/1.3.5/split.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jscolor/2.0.4/jscolor.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.11/handlebars.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/jquery-simplecolorpicker@0.3.1/jquery.simplecolorpicker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.devbridge-autocomplete/1.4.7/jquery.autocomplete.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/yamljs/0.3.0/yaml.js"></script>

    <script src="js/fuzzysort.js"></script>
    <script src="js/edam.js"></script>

    <script>
        var HandlebarsTemplates = {
            'workflows/associated_resource_form': Handlebars.compile(document.getElementById('workflows/associated_resource_form').innerHTML),
            'workflows/ontology_term_form': Handlebars.compile(document.getElementById('workflows/ontology_term_form').innerHTML),
            'workflows/sidebar_content': Handlebars.compile(document.getElementById("workflows/sidebar_content").innerHTML),

            'workflows/editor_content': Handlebars.compile(document.getElementById("workflows/editor_content").innerHTML),

            'workflows/fields/text1': Handlebars.compile(document.getElementById("workflows/fields/text1").innerHTML),
            'workflows/fields/multichoice': Handlebars.compile(document.getElementById("workflows/fields/multichoice").innerHTML),

            'workflows/fields/edam_operation': Handlebars.compile(document.getElementById("workflows/fields/edam_operation").innerHTML),
            'workflows/fields/edam_input': Handlebars.compile(document.getElementById("workflows/fields/edam_input").innerHTML),
            'workflows/fields/edam_output': Handlebars.compile(document.getElementById("workflows/fields/edam_output").innerHTML),
            'workflows/fields/edam_format': Handlebars.compile(document.getElementById("workflows/fields/edam_format").innerHTML),
            'workflows/fields/boolean': Handlebars.compile(document.getElementById("workflows/fields/boolean").innerHTML),

            'workflows/fields/MultipleChoice': Handlebars.compile(document.getElementById('workflows/fields/MultipleChoice').innerHTML),
            'workflows/fields/Text': Handlebars.compile(document.getElementById('workflows/fields/Text').innerHTML),

            // also partials
            'workflows/fields/MultipleChoiceAnswer': Handlebars.compile(document.getElementById('workflows/fields/MultipleChoiceAnswer').innerHTML),
            'workflows/fields/TextInput': Handlebars.compile(document.getElementById('workflows/fields/TextInput').innerHTML),


            // concept maps
            'workflows/edam-input': Handlebars.compile(document.getElementById('workflows/edam-input').innerHTML)
        };

        Handlebars.registerPartial("answer", document.getElementById('workflows/fields/MultipleChoiceAnswer').innerHTML);

        Handlebars.registerPartial("input", document.getElementById('workflows/fields/TextInput').innerHTML);
    </script>

    <!-- Custom js -->
    <script src="js/main.js"></script>
    <script src="js/datatypes.js"></script>

    <!-- Init -->
    <script>
        Workflows.formSubmitted = false;
        $(window).unbind('page:before-change', Workflows.promptBeforeLeaving);
        $(window).unbind('beforeunload', Workflows.promptBeforeLeaving);
        $(window).bind('page:before-change', Workflows.promptBeforeLeaving);
        $(window).bind('beforeunload', Workflows.promptBeforeLeaving);
    </script>

    <script>
        $(document).ready(function () {
            $('#simple-colour-picker').simplecolorpicker();

            $('#simple-colour-picker').on('change', function (e) {
                var valueSelected = this.value.toUpperCase();
                $('#node-modal-form-colour').val(valueSelected);
                $('#node-modal-form-colour')[0].jscolor.fromString(valueSelected);
            });
        });
    </script>


    <script>
        $(document).on('click', '.delete-list-item', function () {
            $(this).parents('li').remove();
            return false;
        });


        $(document).ready(function () {
            $('#term-autocomplete').autocomplete({
                serviceUrl: 'http://193.40.11.103/edam/operations', // https://tess.elixir-europe.org/edam/operations
                dataType: 'json',
                deferRequestBy: 150,
                paramName: 'filter',
                transformResult: function (response) {
                    // console.log(response);
                    return {
                        suggestions: $.map(response, function (item) {
                            return {value: item['Preferred Label'], data: item};
                        })
                    };
                },
                onSelect: function (suggestion) {
                    $(this).val('');
                    Workflows.ontologyTerms.add(suggestion);
                },
                onSearchStart: function () {
                    $(this).addClass('loading');
                },
                onSearchComplete: function () {
                    $(this).removeClass('loading');
                }
            });
        });
    </script>

    <!-- Reload on save -->
    <script src="//localhost:35729/livereload.js"></script>
    </body>
</html>
